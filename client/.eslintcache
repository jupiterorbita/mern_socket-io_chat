[{"C:\\Users\\Icaros\\Desktop\\react_socket_chat\\client\\src\\index.js":"1","C:\\Users\\Icaros\\Desktop\\react_socket_chat\\client\\src\\App.js":"2","C:\\Users\\Icaros\\Desktop\\react_socket_chat\\client\\src\\reportWebVitals.js":"3"},{"size":463,"mtime":1611722465372,"results":"4","hashOfConfig":"5"},{"size":6081,"mtime":1611802465072,"results":"6","hashOfConfig":"5"},{"size":362,"mtime":499162500000,"results":"7","hashOfConfig":"5"},{"filePath":"8","messages":"9","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"10"},"1wqcpzv",{"filePath":"11","messages":"12","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"13"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"C:\\Users\\Icaros\\Desktop\\react_socket_chat\\client\\src\\index.js",[],["17","18"],"C:\\Users\\Icaros\\Desktop\\react_socket_chat\\client\\src\\App.js",["19"],"import \"./App.css\";\nimport logo_img from \"./static/sm_logo.png\";\nimport { useState, useEffect, useRef } from \"react\";\nimport io from \"socket.io-client\";\n\nfunction App() {\n  const [socket] = useState(() => io(\":1337\"));\n\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [userName, setUserName] = useState(\"\");\n  const [userNameErr, setUserNameErr] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  // const [emoji, setEmoji] = useState('ðŸ¦„');\n  const [dataArrObj_from_server, setDataArrObj_from_server] = useState([\n    {\n      userName: \"\",\n      emoji: \"ðŸŒ´\",\n      message: \"WELCOME TO THE JUNGLE!\",\n      dateSent: \"zzz\",\n    },\n  ]);\n  // client message:\n  const [newMessage, setNewMessage] = useState(\"\");\n\n  // Join Room\n  const loginHandler = (e) => {\n    e.preventDefault();\n    if (!userName || userName.trim() === \"\" || userName.trim().length < 4 || userName.trim().length > 10 || userName === \"\") {\n      return;\n    } else {\n      setLoggedIn(true);\n      setRoom(selectedRoom);\n      socket.emit(\"join_room\", { room: selectedRoom, userName });\n    }\n  };\n\n  useEffect(() => {\n    // get all data upon login!\n    socket.on(\"server says - heres your data\", (all_ze_messages) => {\n      // set all messages to be displayed upon arrival!\n      setDataArrObj_from_server((prevData) => {\n        return [...prevData, all_ze_messages];\n      });\n      // setDataArrObj_from_server([...all_ze_messages]);\n    });\n    // announcement that someone joined!\n    socket.on(\"message_from_server\", (serverAnnouncement) => {\n      setDataArrObj_from_server((prevData) => {\n        console.log(prevData);\n        return [\n          ...prevData,\n          {\n            userName: \"SERVER\",\n            emoji: \"ðŸŒ´\",\n            message: serverAnnouncement.message,\n            dateSent: serverAnnouncement.dateSent,\n          },\n        ];\n      });\n    });\n    // update chat from other ppl\n    socket.on(\"receive_message\", (dataArr) => {\n      setDataArrObj_from_server((prevStateData) => {\n        return [...prevStateData, dataArr];\n      });\n    });\n  }, []);\n\n  const formHandler = (e) => {\n    e.preventDefault();\n    if (newMessage === \"\" || newMessage.length < 1) {\n      document.querySelector(\"input\").focus();\n      return;\n    }\n    let messageContent = {\n      room,\n      content: {\n        userName,\n        newMessage,\n      },\n    };\n    socket.emit(\"event-from-client\", messageContent);\n    setNewMessage(\"\");\n    document.querySelector(\"input\").focus();\n    // return () => socket.disconnect(true);\n  };\n\n  const onChangeName = (e) => {\n    if (e.target.value === \"\") {\n      setUserNameErr(\"\");\n    } else if (e.target.value.trim().length < 4 || e.target.value.trim().length > 10) {\n      setUserNameErr(\"You name: 4 to 10 characters!\");\n    } else setUserNameErr(\"\");\n    setUserName(e.target.value);\n  };\n\n  const rooms = [\"Mufasa\", \"Baloo\", \"Mowgli\"];\n  const [selectedRoom, setSelectedRoom] = useState(rooms[0]);\n\n  // scroll to bottom\n  const messagesEndRef = useRef(null);\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [dataArrObj_from_server]);\n\n  return (\n    <div className=\"App\">\n      {!loggedIn ? (\n        <div>\n          <img src={logo_img} className=\"main_logo\" alt=\"animal chat\" width=\"300\" height=\"150\" />\n          <div className=\"logIn\">\n            <form onSubmit={loginHandler}>\n              {userNameErr ? (\n                <p className=\"err\" style={{ color: \"white\" }}>\n                  {userNameErr}\n                </p>\n              ) : (\n                \"\"\n              )}\n              <div className=\"inputs\">\n                <input className=\"username\" autoFocus type=\"text\" placeholder=\"name?\" onChange={onChangeName} value={userName} />\n\n                <span> room: </span>\n                <select value={selectedRoom} onChange={(e) => setSelectedRoom(e.target.value)}>\n                  {rooms.map((room, i) => (\n                    <option key={i} value={room}>\n                      {room}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              <input type=\"submit\" value=\"Enter Chat\" className=\"button\" />\n            </form>\n          </div>\n        </div>\n      ) : (\n        <div className=\"wrapper\">\n          <div className=\"logo\"> </div>\n          <img src={logo_img} className=\"main_logo\" alt=\"animal chat\" width=\"300\" height=\"150\" />\n          <div className=\"chatContainer\" id=\"scroll_down\">\n            {dataArrObj_from_server.map((msg, i) => {\n              return (\n                <div key={i} className=\"wrapper-id\">\n                  <div className=\"message_bubble\" id={msg.userName === userName ? \"You\" : \"Other\"}>\n                    <div className=\"name\">{msg.userName}</div>\n                    <div className=\"left\">\n                      <div className=\"emoji\">{msg.emoji}</div>\n                    </div>\n\n                    <div className=\"right\">\n                      <div className=\"actual_text_message\" style={msg.userName === \"SERVER\" ? { color: \"red\", fontWeight: \"bold\" } : {}}>\n                        {msg.message}\n                      </div>\n\n                      <div className=\"time\">{msg.dateSent}</div>\n                    </div>\n                  </div>\n                  <div ref={messagesEndRef} />\n                </div>\n              );\n            })}\n          </div>\n\n          {/* FORM --------------------- */}\n          <div className=\"form\">\n            <form onSubmit={formHandler}>\n              <input\n                className=\"da_input\"\n                autoFocus\n                onChange={(e) => {\n                  setNewMessage(e.target.value);\n                }}\n                value={newMessage}\n                type=\"text\"\n              />\n              <input className=\"send_button\" type=\"submit\" value=\"send ðŸ“¡\" />\n            </form>\n          </div>\n        </div>\n      )}\n      {/* {JSON.stringify(dataArrObj_from_server)} */}\n    </div>\n  );\n}\n\nexport default App;\n","C:\\Users\\Icaros\\Desktop\\react_socket_chat\\client\\src\\reportWebVitals.js",[],["20","21"],{"ruleId":"22","replacedBy":"23"},{"ruleId":"24","replacedBy":"25"},{"ruleId":"26","severity":1,"message":"27","line":67,"column":6,"nodeType":"28","endLine":67,"endColumn":8,"suggestions":"29"},{"ruleId":"22","replacedBy":"30"},{"ruleId":"24","replacedBy":"31"},"no-native-reassign",["32"],"no-negated-in-lhs",["33"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'socket'. Either include it or remove the dependency array.","ArrayExpression",["34"],["32"],["33"],"no-global-assign","no-unsafe-negation",{"desc":"35","fix":"36"},"Update the dependencies array to be: [socket]",{"range":"37","text":"38"},[2071,2073],"[socket]"]